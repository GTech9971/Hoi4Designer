# HOI4 航空機設計アプリケーション - 実装ロードマップ

## ✅ 完了済み機能

### 基本システム
- [x] メイン設計画面（プリセット名入力、モジュールスロット、ステータス表示）
- [x] モジュール選択画面（詳細表示、ステータス差分表示）
- [x] 武器タイプ選択画面（機関銃、魚雷、爆弾、防衛砲塔）
- [x] ステータス計算システム（変更前後の差分表示機能付き）

### 実装済みモジュール
- [x] **エンジン**：エンジンI〜IV（推力、速度、機動性に影響）
- [x] **機関銃**：10種類（大砲I×1/×2、重機関銃×2/×4、軽機関銃×2/×4、対戦車砲等）
- [x] **爆弾**：7種類（徹甲爆弾層、仕込み爆弾、大型爆弾層、ロケットレール等）
- [x] **防衛砲塔**：3種類（対方式、重機関銃式、軽機関銃式の防御砲塔）
- [x] **特殊装備**：8種類（空対空レーダー、爆撃照準器、無線航行等）
- [x] **魚雷**：3種類（軽魚雷、軽魚雷の安価な代替、小型版）
- [x] **電装系**：8種類（空対空レーダーI/II、爆撃照準器I/II、無線航行I/II）
- [x] **装甲**：2種類（基本装甲、重装甲）
- [x] **燃料タンク**：2種類（落下タンク、自己酸素供給タンク）

### 推力vs重量システム（NEW！）
- [x] **推力計算**: エンジンの推力値に基づく総推力算出
- [x] **重量計算**: 全モジュールの重量を合計（基本機体重量4.0t + 各モジュール重量）
- [x] **設計有効性判定**: 推力 ≥ 重量で飛行可能かどうかを判定
- [x] **視覚的フィードバック**: 緑色/赤色のカラーコーディング、推力/重量比のプログレスバー
- [x] **リアルタイムプレビュー**: モジュール選択時の即座な推力バランス更新
- [x] **設計制限**: 推力不足時の保存/装備ボタン無効化
- [x] **警告システム**: 推力不足時の改善提案メッセージ

## 🚧 次の実装予定

### 1. エアフレーム別制限システム（優先度：高）
- [ ] **エアフレームタイプの導入**
  - 戦闘機（Fighter）
  - 重戦闘機（Heavy Fighter）
  - 戦術爆撃機（Tactical Bomber）
  - 戦略爆撃機（Strategic Bomber）
  - 急降下爆撃機（Dive Bomber）
  - 艦上攻撃機（Naval Bomber）

- [ ] **エアフレーム別スロット制限**
  ```
  戦闘機:
  - エンジン: 1-2個
  - 主兵装: 1個（機関銃のみ）
  - 副兵装: 0-1個（機関銃/小型爆弾のみ）
  - 特殊装備: 0-2個
  
  重戦闘機:
  - エンジン: 2-4個
  - 主兵装: 1-2個（機関銃/対戦車砲）
  - 副兵装: 0-2個
  - 防衛砲塔: 0-2個
  - 特殊装備: 0-3個
  
  戦術爆撃機:
  - エンジン: 2-4個
  - 主兵装: 1個（爆弾）
  - 副兵装: 0-1個（機関銃/防衛砲塔）
  - 特殊装備: 0-2個
  ```

- [ ] **エアフレーム選択UI**
  - 設計開始時のエアフレーム選択画面
  - 各エアフレームの特徴と制限の説明
  - 選択後のスロット構成変更

### 2. 高度なステータス計算（優先度：中）
- [ ] **複合効果の実装**
  - エンジン数による推力の非線形効果
  - 重量増加による機動性ペナルティの詳細化
  - 高度による性能変化

- [ ] **戦闘効率計算**
  - 実際の戦闘シナリオに基づく効率評価
  - 対空/対地/対艦の専門化度合い
  - 航続距離と燃料効率の最適化

### 3. 保存・読み込み機能（優先度：中）
- [ ] **プリセット管理**
  - 設計の保存・読み込み
  - プリセット一覧表示
  - お気に入り機能

- [ ] **エクスポート機能**
  - JSON形式での設計データ出力
  - 画像としてのステータス表出力

### 4. 高度なUI改善（優先度：低）
- [ ] **アニメーション強化**
  - モジュール装着時のアニメーション
  - ステータス変化の滑らかな遷移
  - 3D航空機モデルの表示

- [ ] **モバイル対応**
  - レスポンシブデザインの改善
  - タッチ操作の最適化

## 🎯 現在の技術スタック
- **フロントエンド**: React + TypeScript + Tailwind CSS
- **アーキテクチャ**: モジュラー設計（各モジュールタイプを独立ファイルで管理）
- **状態管理**: React hooks（useState）
- **UI**: HOI4準拠のダークテーマデザイン

## 📊 データ構造
```javascript
// モジュール構造例
{
  id: 'engine_4',
  name: 'エンジンIV×1',
  icon: '⚙️',
  stars: 4,
  description: '...',
  thrust: 100,        // 推力（kN）
  weight: 15,         // モジュール重量（t）
  stats: {
    maxSpeed: 180.0,
    agility: 10.0,
    weight: 0,        // 追加重量効果
    cost: 18.00
  }
}
```

## 🔄 次のスプリント計画
1. **Week 1**: エアフレーム選択UI の実装
2. **Week 2**: エアフレーム別スロット制限システムの実装
3. **Week 3**: 複合効果計算システムの実装
4. **Week 4**: テストとバグ修正、UI改善

---

**最終目標**: HOI4の航空機設計システムを完全に再現し、プレイヤーが実際のゲームと同じ感覚で航空機を設計できるアプリケーションの完成
